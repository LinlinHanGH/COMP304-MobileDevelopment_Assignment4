/* Jun 28th transfer to Linlin Han
* */

package com.centennialcollege.james.onlineshopping;

import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.support.v7.app.AlertDialog;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

public class LoginActivity extends AppCompatActivity {

    //private fields
    private boolean _isCustomer;
    private DatabaseHelper _dbHelper= null;

    private static final String tables[]={"`OrderRep`","`Order`","`Customer`","`Item`"};
    private static final String tableCreatorString[] =
            {
                "BEGIN TRANSACTION;",
                "CREATE TABLE IF NOT EXISTS `OrderRep` (`employeeId` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,`userName` TEXT NOT NULL UNIQUE,`userPwd` TEXT NOT NULL,`firstName` TEXT NOT NULL,`lastName` TEXT NOT NULL);",
                "INSERT INTO `OrderRep` VALUES (1,'Jake','A12345','Jake','Nesovic'),(2,'NarendraP','B12345','Narendra ','Pershad');",
                "CREATE TABLE IF NOT EXISTS `Order` (`orderId` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,`amount` INTEGER NOT NULL,`deliveryDate` NUMERIC NOT NULL,`status` TEXT NOT NULL,`customerId` INTEGER,`itemId` INTEGER, FOREIGN KEY(`customerId`) REFERENCES `Customer`(`customerId`),FOREIGN KEY(`itemId`) REFERENCES `Item`(`itemId`));",
                "INSERT INTO `Order` VALUES (1,3,'Jun-28-2018','In-Process',1,1), (2,5,'May-8-2018','Delivered',2,2);",
                "CREATE TABLE IF NOT EXISTS `Item` (`itemId` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE, `itemName` TEXT NOT NULL, `price` NUMERIC NOT NULL, `category` TEXT NOT NULL, `image` BLOB);",
                "INSERT INTO `Item` VALUES (1,'iPhone 8 Plus',2000,'CellPhone',X'89504e470d0a1a0a0000000d4948445200000032000000320802000000915d1fe6000000017352474200aece1ce90000000467414d410000b18f0bfc6105000000097048597300000ec300000ec301c76fa864000013e0494441545847b59807545457b7c7f72dc3c0d0458a8a805204a9a22082a089154390080a0c4d05a404101b8abd103b16ec4ab14563c3c42f6aac891d6ca07429091a86224399997bef00c27d6766409490e47debadb7d79ee1ac3b77ddf5e3bfff679f732eb06c5717cbb6b751ade5af9a4a729b0a1f0b0b1e35163e6a2a7af8eef1cdbc3bd75e3e79f0ead5eba2e25294c52565454525c78e660607858d1f3fc1d9799cb3938b2c9d5d9c9cc6a2ef7e52feeb5874679feb8a2b4e2eaee3dcbdbdbfd9b56b6f75f55bb6271016db26691295e4481aaad95601dbd1ccb2529665de97171495573436b73634368b29a6ada3532aeda87efb2e34749ebefe20f87f087b7bc7cbd93ff662b5943e93b636b20dbffb4d7157e2aae304896edabd7b777bc787b7efde7de5e5a3a2a249924ae8a29191b1ff1cbefc21fd044e9204a98c0618061c0e87fc24088250dcf30fa1a4a4e433d3b7b3b3b31b4b58924bb7d6b3ef2bd16f1ac35c39ca5a6870fbce6f62092da8ad4763ad61ae2a2ada68e03276fc175f4e44837e8324b95cae1a1a6018a6cce52af706bace55dcf3cfc10fe4bf7e55f051ada774535dbbb0baf0d7ff44cf9a1ee93bd57fa2736ece931691e4cf9ada5f6edcf2f49c3ecdd373d2e4c93366cc9ce831a1fb197d03ebfefb7f083e9f9ff7325f86852413953ea385f5a29a8ab6c63f595a88b2ed5d59657945538ba8aefe7da3b05924a650be7d2758b674859b8b2ba8ea71f52c381afa045705c3491cc7091c9549894ba8f0080d55425b131fa84de86b93461a84892a3e8c4798a9e216aab8b90661a14e986be3165a84850e61a14d9a6913665ab8990ec76420391861858486e6e7bfea564b54a6c02a170b2ac482ca564185a030e74d695953b3a8b6ae0191d53734a241496959f8bc68b751d644d87e48adc1165c26dc2341cf1c70643be4475535183808cc2cc0c511bc3c2078062cfa1a76b8c0614b3869093f59c20d5bb8371a1ebac39349f0d0171ecc853b7cf8994f9e0922b7b9c14e00cd9090a0bcbcbf60890495084b24a8a8415865bd582891c90a8b4b23c263dcec4712d1fbe1a408df5c8a476663e323416738601ce4781c5478306020189b80a30d7ce902b3be84f0a9b0ce0eb69842da30c83485b31670d11e7e74856c4fb8f4159c9b0d2767e3fbcc60330ea9c8c3a12181fdaaf5b758284bde542c5abc6c9cad8d52ec2ee266177e4a8cef7947c45ec73c2241773886a1b946e2988a0a68eb82910938d8c02467f09e0891eeb072046c34869dc670cc1c4e38c0d9d1f0831d9c73811fa661c747401a0e8700bf0f30382438e0f5ab4219d687ce8e96e25c6479e42d05568ba0bca6e0694971e9a75868f0a6bc3c267ae1f8d1f6e031833c53a474b58d38df461e682016dec527446303866272d793c0e381a62e0c3581d1d6f08513784f8048474832863543613b92cd048e0d812c5bc872834c57ec280f4e023cc4358b0074c342f9f7eedd976175757d90c82c5fdb8b5553fe36ff7155d51f4dcdad9f62151797c4c42c741bed082e33207a1de7541ee7e70ea56c9673a4894cfc0d47d554d397b52c6434e02a83c6006c8811d85981c728f074857956b07010acd4819441b0c302f6dac2be0970c8104b03c8c6e03ec9cb01d0090d0dbaf1cb2d0556a7a4ec73b56acaffc8bb5f59f91916f2564151512cc27272c2acc742403c396f89d2d942e26a3b7e85e56448f0c4dbe0e88ba90c40264364387079a0a10d830cc11a4d023b986e0fa106103b049618c35a23d8e8085bbf84edc3602bc06180e338a423cb878505dfba795b86d5de2e6d297ccc34f5aa854cf636ff617149499f2216959484cf8f767575d3018eba1e8fb0b604af40eed962ec4627f1234b6688f0a86cb0fd0a94d4141d0cb57a6550d7027d43b03207676b6caa05f8ebc27c3d881f0ecbdcb16457586d046bb4611906eb0938822c1f161674f5e7eb322cf41195bdfcb488a841d4bece292bedc6fa48861a446c7482b5eb9853e0158f4f5657011d1e70875b6b9c2cc4efb06436ab74b0050f3f83597c8911bc9ede4a72414d1d740dc0d4149c86c27455f01e007c1b6cee4888368744134850813880140ef73880764870e0ebd772cbcbb19ed38dbd45445953945b56dad7f2326f4527588e1b97a93c8485c07d4494863a0c5403e521465aa78bc95f5922bb0bcd002c380b3776068cdba3196a6b3c75d0d3c6ac74c15917c61bc2a421e06508fe7a10c883700c92003faa647001792b38183588d7dd58e2b2179f7a0ba5a0f02952abb945ac0042dfb2be85bc15bdd0d2797486cd17ac810b0b5fdcc3d70ce6f1b4b4806b3858ed7c317197e55cea22f7d6e3b3f7607a6680c95677797038a08a5a9a0e0c1e0c663ae0c4033725984e40104022c05e6cc00fa4c925800121c1fcde762a466a09115677df9263c9d46a6e152326d4e2155dbeb8a41479cbd27154a67718ebbd58a287c8ec6bb0ef5c3923789aa0623244ed460d7e97252f76123bde12d3d6e046a3309c8ba14ecb95cd03029494414d0df4b8301c00adf7b3018bc388cd98e6f7f8a06c8ee979e4ad3e58cf98a6de762ac32aca292b9161219d14586850f6e6cda2c4e556f676e981d1eca64c6afab7b4eef80f60d186ad9d4f78725541d9ca4cfdc63b19d9d90e72f50b6c660a185862ea83701d2b856804a07d8f1a013a18670aa61c8da96dc0340e607aa709a3f31c2b5444e4ad4f161f71d953855a1feb28287afaa6ac5451c45eac8a8ac4454996b6b619712bd90397db920f5393a318fdf1ed308c85c45d5804866680f970adebefd00cc0d29b39ab5fe09317117a2338439de53e435f2851fb5005ae0768ae8001bbc02013333e4f9a67e3d6084b2b38989fffc99a988bb014ebb4a4b6aa1b0b15b11face5236cac3312d6b23f3e97ec3cc3241da63cc269fd71ed60cc42d8792c59930384f960de2f7f10d7baf0638dd8d28730dc4dd9dc5d0e8580101617230d31de24d0d90083b2c0f8323efc676cc445d2161551233488dfbb262a8aa8609261d5560a8a73fb60d5d7372ad4b2b0b5c95cb491bd9acf9cb947edb840c7a7314e81b4813b23230bcdc7768c8481603e50edea1bfc72077e54484e4d56b69e862b0f40fd0cf53b4c490f3806c07306bdb5985136985c01d39f08cbf384f56984d5eb2d74be90633520b5bab16496efcf5b8a225a5b67266d66af1530e79e48bfbf4f6d3d4707af6746f949f5c6d360c4c23775d8511f1803261aca175e933f75102b6e938e7eb8991b666081e99862bad640aaa352621c53cce00036240b333a0dc6992ab62700d30809facc5b7fa7966c1bd8ad56835cadc4244b9b9119c95bd93b6f9893f7a5e79ed0a7ee311bce483c1369075f4ac78902930e984c61fb564300e8ebe259f778d7a43086cf999e0ccefe98b527587a7e7419a8fb81ee3a18bc0f4ccfea4eff0d53d109e6f778ab47adcfb18a1056d967459461552e42deb2b6ca58b99dbd57c55cc8a18fdd925ecc61b27ea3971d154f08a76c7c281d171a4c3bc0ab1d528e439c0acf104fff95179e8607a441d8099818abe41aa1c092c58008187a01cc7ec5c63c7348162b690f0de207fcf75895958b1558abb6b30ffe905e7ece9cbcc7ecbb2ebd944b1fb94dcddfccb8844aacbc195d7709314e0a7eed907c1bd69b729d35638ee09392c9ed5558f80fdc692b144828308db960f6141c8ad57dde4dd8cf72b54d820203f3f2e47bf9feb18a73fb784b81259f89233393e558d9cf99ef1f30076f32bbaeb4a189b9f58278c612f1587fca618ed8d487d10d6e8379342c7a012993b5fcc1cc47e9bb62e59314392b55b12d9361f13cc0bc10610d5df0deed00aba4631c14d083858e18fd581e61f599890aac4439d6f26decfd2ae9e567d2538f98a3b799d41fa5db2fd3a77ea5928e4926448b9dfda4fe49d4b465f4f0780642a5b0ac18f6846b06c1c8459af7594ec2354cd35c81051c2b6cc46bb02db558db387a1fcbd5370a0ef0ef9d89e8e42357ab17aba1f0497f5868d39c24c35afa1db2bc34fb19fdfd23faf0cdb63d3fd32967e95d97986d97e9a8547a5c98c46f21bdea10159a4ad92fa7c9044ae56485d681c53005e6df54fda105338f454832c5b08184793e58e68f4c1359ed69571e34283830e033b5a4cd32b5c40219964450f9bee0495949499f22be41588b96c96622ea5bd78aa4e773915a084bbae70abded02939cc96c3947c7ef15cf58d8ea30a72debba28e5389d9025b6df28314d978cceff5d7d6b3c84c0a90f98ef0324949c4c0937bf8b595c324e6db139dc001a7a72ac5ecbe74ae5de12d55652b595b4a0bc1161a11dc4e758156826a222dacabbfc4faf98ef1f3259f7e943b798dd5798efced26b8e4b120f32717b247eab68b70871f466e98da7e2ade7a8840bf4f4f352ffd216cb57bf43acabc7236c190d98adc25f98e1166d8f68adb977461e2a01ae411fac67b45c2d4a80982ae81a39563f6ac92d6f6b93f1ed5af6e273faf85de6e84dfac05526f532b3e90cb332934e3c4047eea002d75133125bec66496fe78952bfa70fdd96a6e6d2abaa1a670a5bc9d4d3ca1932bf29fbc9a9084cc978f08c859a165f72269f019e7e081f595e8e853e3d5895744d2523a860bad5eaeb2d8485fa96a5ad4d7ad42af6cc63fae80dc444effd89d991cd206fadc8a0e2d3e888ed146afade4b25ee11cdd3e2a48f0a5a37a453d965adfb05bfc7d70b6d9ebd8365c33c455c72a13ac85fa22034d541d8a85832f2200c80e0c0e0cfbb7c730385806a10d3df627517d1ce3a337c397bfc37e6e0cf0c62da7991d97c8e597f8a5e7e948edd4dcfdb4c05aea5672ea526c7486c674bb69e171fba203974b5e16c5de9c69adf670944b02a31a85185b375140ce3a0c51bc309d76fc1f7b2ed596f3d2508e2877c3613db8475a8769f61fda5881515158bd19a68679d11b6844dbf45eff991d98198ce32eb4fd2c9e9f4e243744c2a1db249e2974c792da226c5489cf9e27131d29f7244ebf6375fad7a73b8e665429384dc7e35f899a1fd356f98321454c0cc0bbcd221edc4d28dc005080ae9c1421f399680ae798380bab1fa6b10080bcdc411f6d6c78216b2fbaf3268f6a59c65d69d60928f318b0f51716954c4369abf9ef249924c8ba7262c609c435a47784b369e91de7dd67cf0cc9fb7ea8ab31aab34d25eb81ddd9bdfe40a21ba301dc6a469ad39125b31e6100cd5004ee0a758e2d2176dc25a995a32a6bf2f22f2162aa2836da6ffb76cea656ad36966ed7166c551c4c4c4a5d10bb6d3735368ff5594f76266520ce53657ec3887b69a45857e47bda19ad76588ffacaf79d65836f5c213d8764f54bd65c5cab03d49d12f37a4952dcee6191c8299e848101012d4bddf9217f1795f2cb4b1e90f4bb626dadb64fa46b35bce31ab3398a42374e23e266e1713b98d0e4ba166afa6672ea3a6c7531e1194532033d24b6cc717c7ee6929100ad272a8e7e5cd82ea968735efe040b24f4976cea34569777779665d84f927807f035ba80bca01c19f61a122fe050b79ab5fcb3bd8a5cf8c64d79da4971c6212f651313be988cd74c87a6a0ed26929352d8e9a1849b98448ec7d2566935b745dda76dda87b5cd79257fb76c74b7175792b2ba9b1beb50feead862b3fc0c91cd8f500d6de879505d8267d50f30ff9ec8891db074bd81f56f7523dca3ec3338c4d3ac2c4ed66166ca3e77e47f337d0bec9f4d78be929714827c9d810b45a5323be161b4ea0083351e4fe9abbcdad6f6b6b53eed63d697835f78f3fe19746c87a0f7bab6173396c2a862daf614335b66db01cab772f8f8e18edff0bb5bab1463ba44f0d6213d224115ba8b08d54c06a7a5612ed95484f89a53ce653ce4112073fc9082fca70a258db49825b3413762d97040df942e9af15e5ee15adb0b519621b61611d2ca985e535b0a61ad655c15a21ec1c02eafe68d3fcc9fbada7ed4db299d843d6ab16a2519035340811966c1be8e8903ec98f45b50b5b4f05ac92f82ca167c45393a2e8f161d4187fcaf61bdae22b0962d21c2de1588961180dfa2dc3c3db0f0a8416bb29e0b74250338437439410621a21a11e9634c0d23a58de062943402de06311e58bcfd3b6a65a46ce2495af8932ac9e53755fb51ced8f4ef061e7a548662fa7be4e944cfb56f24504e51a4a39ce41bb5389d9346ab0bb447d742b692d0113318c15831f0d5f896082183c2510d80221ad10d602f35a64700b84102d84b806486061f550e0cdf9144b549adb8eb0ba9b56055a1685e8542d6fa71f995076af89631c8e8df362e7aca4bce2a92951125438173e35ca97b2f2a6864d950c1c47a93ad0b80525d3c99d19b4416a7591515f2e812914cca2c09f82400a82c51022815011cc1341780b44b640140b4b8d40b92f16b2bc024bae961c4bbe8340340def850a2c45112dc78c3a31f62bd66f253b238e9d14c9ba85b163fcbbec7c59f3afbbf4c6b33cfb2ed2a60bb763957d58e39dac470eebf1bc03a67411df7492be9dc4ec2ed2bf8be07f20833ac9d00fe4dc4e32fc0319f1818c62394b4c41c53fb8674d54348876611d2a226262649b88f22654c4b25e2c592ab016af707375932ffe7f1f68f9edde15ffd7111a1a9a97d7f3c6a6b10815b1fe536f3516e59414177d8a8506e55555b297946eff86d51324874b2a2969690f5056e1755ffabbe8f937fcfd035ebeccebc612163dee68ae970a646ac91259be38b7e0d5eb5631852cff512d84b56469b2abab6bf733fe31747474bb47008686460421db8efe6b040705171797cab03e281a444b1d535b2e95ab85346baec8cbf9ed86986e9333a1ee20d3acaafa5deaae346f6f9fee67fc63e8ea1a0c1d6aac185b59592b06ff1c1a1aea3367fa22261916cb767de8ec682e78c2d494b6d55749eb7f47490bcaaa9ede7ef2e84143536b63b3f8bdb0a551d82ca86b28282c89898eb3b41cd9fda47f8fffc265e35cdc4ae4527563c9931509aa6bf31f0a5edc6f2ccc6d2c7a5aff2aa7eac17f1e5d39f7e4ce4d741a292c2a4199ffaa2027f7d9f1e3a7d7afdf141b1317b520469651b128a3a3bf8d960fa2a26457d078c182e8c8c8e8052817c4f4fcf4975c806e8b5db674c5f5eb371440b260d9ff01d434e6f35b327bcf0000000049454e44ae426082'), (2,'galaxy S8',1800,'Pad',X'89504e470d0a1a0a0000000d4948445200000032000000320802000000915d1fe6000000017352474200aece1ce90000000467414d410000b18f0bfc6105000000097048597300000ec300000ec301c76fa8640000163d494441545847cd9967709be791c73973932f99b9bbcce47c76123b89653bb2259b1520514810bd1344210136b0839d22d88b285294d89b285615abd8b28a29c996281651a2a8428a9d204114a25716b13aceccdd248e13dd02af0ceb72c9dc87fb72effc6767df072ff0fcb4bbd867217abdfc7f79fd9fb0b6b7b696161756b56a837ed568d081cc26a3d96470c968b098c13782b55a4c568bd966b5208edb9a2c2078c0f58cc164d4c327e85635cb8a45c5e2027cb20b6b41b1d8d1ded25c5fd7dc50d75c5fdb545fd75477b2a1f64423c8ed34d4d680ad3f59036a38090eac9c68aa3f5998975b243f52909b9d9f9325cfcecacf713979d919857939c78f5514c9738b8e6415e66615e466baadcb29c8c92c3ce27610b96f41ae27ddb6babcf8c6b52b5edad5552a1ecd246038243c9b886393f02ec76583111f112b14c724605d0a058b611171f0401885f09a425ebf65840416e5e755961655141714035f5e76515e0ef81e1d2d297cdd812711a7bc28ff6c77a7d7d0bd013a1e2d6451ff9e2860054c8a80494e9008331363d2136213a344994971111cbae73178e07547e0f6c3e9a46c596265597149fe911b5f5c1e7f303236325853590ebbc2f61ec12dc25456282f2dc8030bb717cef47a0d0d0e30428210827f2401839c0034a98959a989b284d81c594a148f410fc57369e4bf61720bfe1914c0ca4a4938565eda545b535156ce0b132526a474b434221b83102cc401ac23996955e5257959e9b072e9dc19af91e14166489084112866a0c40c7424fd95c42e8b8aa4a122a828310d1d410d1091fdddf21391fc232901121a5a0c2f5150122a0a6ec11123968a129050e1644c766a42456951676b5394383a2808fbfe7b1ff55ffdbcf0483682e521f3a40fe2ea0e5efea5737d5ef787872818df0f12963e8c7d7a58facc37693230752a306d3a307d069d318dca9c46674da372a650b9537e47a6fce553010533a8e25974d91caa74d6ff98c2bb74c1bb72c1e7a85b15f3be15f3874ae7d32fae32b34f67278a8b5de555989591c9667213e2936a8f57428541b23c4cff130ee48ad68391215290cfc18c9d8f5256bd334c41721baed081297206163bd0658ec07207aac21650690fa8b20754dbfd6beca85a27ba711dddb4866a5e439fdaf8f8a8c9af69cdafc189c8b71eace370e3b67fdaa5bca4c8ec8cb4c4d8281e9b11ce66f039ccd4442944eb87a8bc02f2c8bd0258f997cf9ff11a1d19a404f91ccad8f0cfd0e2e56662b12db4c41e5c6ac757d8b115f6a04a2bb6ca8aa9b106d65850276da85a4b508305d36cc3b6d882da6cd8538e8f0a967daa74018d16bf7ab34b7566ff7a8b5ff34660c60579b258969c241684c54a2292e2a26589d2ccd424a81ec0820afb81e34726081858207661dd1f1e2407f9a0723742f20ce4620baddc4eae7008ea9da41aa7a4ddcc6cb207d739b10d8ed03687a0cbc03dad0f6ab5e1dbacb836eba1065b60c7da3ba993078b54818d66548319556746d75b021accfe2d6b8199e7e5c992c478693887250ae7440a780097121f9b939e0a0decf5efa3070ec9e30f5823f7c8813e84fc4d6689995361631d73d2aad613db8d519d1bac66bbec82837acaceeb75e4dc70e6dd5ec775aee33bedf8d336f299f56ff7352706ee9272c6842767082d0674bd3110d460443719035a1d98acf3f214498c44cca6d3786c9690c79688f8093192ecb414c042cacb0df48a09891682e5aa2d4822d416b170835766093f66e71e5f679dd810b56ec6f46c723a36a2ce5a059f6e65df70e6ded909ee3667dcb463cface1cfd839176d8d0fd7381dcbefc5defb44fe0ca285ae3304351a829af441cdfac00e0726fb7c7e4a748480cfa090390c3a9045f0c3a45191e9c909f939991e2ca4c85e17e4f7f2f973102d48a22fa97443506989a871f26b37c31b3744ed9ba2eecdf2eb3ac90507f7bc23ec8235f5a655d66f89fdd29e76cbc4fbc2197a699d70f9c53bf2c7b48a4711c71f097ab429e796508d3a4cb30edbaa0b3c6dc5e59c2b488100855343092c1a95cb640a799c18b1282d29fe752c8f90808175639df57a707f9814e843ad5817555b24754e71d386a0f545d6a7ceac2b1bd28bebc2cfb6c3ae6c736eecb0fb77d9b77639b776e8fd3bf41b2fe8d7d6d937777e1effe51bd2910f0b27f06dbaa0260db645836dd5e0dab5982e0b2ef76c7e6a54546424c5854581808978dc18b1303325118ec2f24239d257110b31f384adac30ef07ac205f7ae59af88435b6692dbafd4574e7764cdf86f8ec46d4e50dd1d55d61ffaee8ab3dc1dd5de1e02e7f7037fcde0ef7ce16ffeece27f553efe63d7833e66b6c8392d0be12dcaec2b7ade0db55b87635aedb189cd757288b653099dede3e3ebe01c1787c48700893c164b1381111628938aad21d18a0799d0c048144b006215ab46a87a4ce9cd8be9ed0f922f1cc76c2c51de9e7bb71d777636eef45dfd98b1adc978cec453dd8153fd815dddf168d6c8bc7bef957e9179f1c9b7c3b7914776a89d0a90c39ad0ce9500623ead5e3f37a008bcfe3e131181c06430e0d65d0683c0e3b364a92969c244b4981fe843021faef58d04eef0f112189d53651ad21a5635dd6fb42767147766537f5cbbde4db7b89033b0923bbd2d13de9d89e747c2ff6f17ef4f85ec2c4efbdeb9e1dac79ec7bfcf9bbe9cf089d0bd4de25528f82d4bd44ec5a0eed5a269ed111f27b0a5263238502221e47238532a994700e3b2a4208dd4bee6e5db03dd08045503c0ebcf4d9a767bd1e8e0e43c9b3eaecdc1ab5acdb99757e33f3b3edaceb7b995fed650ceccb86f65347bf913dda4b7eb2973cb99734b19b38b19bf074eba7d26bb8ce59df9a854f8ecdd0cfcdd32f2cd23f55d0ce2d51416714d48b5a525177812c4ec8e311b018282ff83ef2d84cf80a40ebcacd90214710e8f5682194c5f21c57b4000b1a04ffd426f9e862728f2defd28bdcabdbb9b7f67307f67246f6b31fee653fdacb7cb29731b19736b59336bd93bbfcfbdf148ff875ce84744d1d3aba88697ccebfb6c8bbb2c4fb7c29ec3305e7b345eea525ce552db5ac1b9218c66687e2716442086085b1e81e2ce4082a2d70c5ccc3873840fc0a0b92187de11be2d15951bb4efec546fecdadfcbbbbf2913df9a3bdfc27fbf2677b47267773a676b266b68e2c6cc70c19fe25e336e1c222e786f2a3b27952f7f3a8db0a71bf22b25f11d1bf1871c3adaf34cc639d90c4300e9b80c302169d4c0a6331c5427eb23406b0908e8aa41286448f8fdc5e8609e2e1e81011ed2dbefaadb05d45383e9b737dbde8ee8ba2e1dde2b1bd92a7fb2593bb85cf770ba7b7f367b7e4731bc7b4bb6fe57d8dfd74817c6d89d8bb48e858e05c9c4e1c5424dc5b920e28e2ef2e4aef2cc5de51c40d6b7927ba0b52e278ecd7b118700401169c3f102d880aa000045844103cb0ae6821b54544fb886e7c23bd6c0ea999169f5b2d1edc2c79b05dfa64e7e8e4ded1e99d8ad99d92d91745b31b658a8d847baa37cb06a8fd2ae1b026a4638af3e9bce4e67ce6c3e58c87cb690f14e9a3cbb2fb4ba9f715b2719da8be3b3f45ca65b3008b14120c585ca60b2bc98d051d156142e42103c1d47f190e9f87f04d447987ddde8fefb70bcfa9831b9ea7dfb5973f7e513eb95d39b35b35b77d7c61ab6a71b37cde59abdd3c50750f7b699ed8af8c1b5e619e9de15f9c91dd57e43d59963f56c81f2fe53d56e63e56e68c2fe74cae46b5f4e6a7c486b15821580c60d14844375618cc3908160204b181c8213e22b8bde84ee20809edc3babb2fb96dcd18b093fa1618e715854f362a66b62ae7b7ab155bb54b9bb5cb1b2794ceb219fd3f1fbdc31ed050ee2c0bafce24df5e165f9f2e78a62c7eb6543ab15c32095a2a9c5c2e985c2e9c5b8d6def96274bb92ca6070b1a3d440bb0e0b496676700d0eb4210c142d95d3cdbe735363a02d1628c7c23b86b4918754a07f4989e99885b9ab2f917958acdea958d5ae57afd8ab35deb607f39f56edf38734813f1581d766e3a6f74257d74a1644a796c46593dbb5c35a7ac9c5d393abb5c0152e8133a7af253e2b82c56302608b0a844c0a2c1699d18170d531782855498c74142f50acb555b281fcac3bdb0214bd4437bde84933da046774fc43f325628d7ab55ebf52a67b3dad1a3b77f70eeb1f7d529e6435dfc8492df375338ae2c9c5aae9c57d62a56ea9640aa934baa1ac54ab562e5b8da90dcd92b4f8ee33019f8a04062301ea205134e049f0bb34d962c19b0607b4480f2ba20bf17cef6ba8766b40fe1f11eebbe3562dc9632e9cc9f7186de53065d9c4c9931556a1cf55a7babc676ce60fd49e728fad61ced992e636a25bc6bbae8e94af9bcb26649ddac52b7a9d52d2a55935adda0d2d4a9d4757a93acb72f2fe9472c4a68288741158573e36324c88c0adb038407ce8308c417cef440c90f93503eb8273b8c0766e113ab74ca9ea7d8489b33878c2c63be7896ae309ed4dbdbf4d61eadd1ab6f0c77778ef84c9f3ea1149c992a9a583eaa50d5ada83bb4aad35af5a95575dbaaa655ab6ed46a1a4da68c337df22429604112a1a342a38768c16c131f2dce4849849f5f8005fa1b2c58016217d6983b89e8675b943173d8845532634b5d7054aa37c48b06ece03cf6c6939c15439bd9d6b56af0ea81684d13a70cb227caf08b336533ca2aa51a22d4a5d77619b49d3aed699da65da769d5a95b2dc6ccb37d904436440b138860b168afb06012042c248f88f5f081032b9ff675bfc2f29fd80c1dd33327cda2396b9cc291a67454e9d6b8cb7af4bd294cff58815677c169f56aba77f8ca53fca43e697c89f5f94cc59cf2b84adda255771bb43d266da741d369d0b61bb46d7a75abd59c75169228052c5c101a5a17327509c2b8c8800a3d02b6f708891ce2033192c42148a2efb30dc2988efedcc49fb3462ddb9354f674adbdd2e8a0aa74010313e8abc30d4eebcfeb6fbfd53a183c6588be3f4bba325d3eb37c5cad69d169ba8d80a5e934bac84e19b4ae68d95c58102d2683e6c182214210c68e8b8a840115b020590804e2780447932b5aaeda42fb783f5dc33dd45027f4e17366c9b22d4e634fd13b643a7bb1d916a2d2fadd1c0dbc743be0d4cd9f945c0f19d7d06f8cd3bf9a3bf270a646a305ac2ea316c8ba8cab1d86d576bda605e48e16f42d26838e43bbb0e0fc8124f2b9ac38498407ebef2a3723d59dc407f74928efc34f1c98072af2531d77d618b16c8dd5da920c8e24833dc9683b62b5e256341f5fbae55ddef64fa93dded7a702ce8f704717626f8c1dd76a9ba1a48cdad306ed29a32b83ad0675b35edb6c35679e85be95c0a4d370812e2c685d3044f0b96cc082910b7a04c4090915e2787c57b45c25ff60848cf2f970dc821e51121eab19533afea229526391eaed49264792d91e67b6a6d92cb865f5c79d17df1095be55f945c0b5e7945be3f4f303d5dad586554d3be4cea86d33685a0c9a26bda66155dd6035a79debcb4f89673068984034d2e8995432fc66845f1908166c8f4020d61d27978533e05c6f97abcb43123f1833f90f29b00f95a4092d6b4e1fae348b572d31467bbcd5116db3879b2d713673885275b8badd8b9c85ba39836ebe86fbfc76d9dcca09282f83b659af69d2b954bfaaa9d5696a2d26d9591716440b8b462158740a299ccb042c18b9102c4448a83cb72eac1e17d67dc03a306af0be3b8fbaafc08fab4853ab8c457d98ca24d25b246647accdc1b7dbc826a3c8660a51aadf10c8de4c38eadb3544ba3d1c7575a052a96dd46beb0148a705a013ab9a1aada6c6fc0316cd8505ad0b3a2a0c11e11c664ca410b0a0a34279010458e040801038203ed3d5e1f5086a0bedfdee90eed05733be830ba8074bd8a7ead0592d7dc9c8d65ac28d3691d5c67738a80e1bcea8673a4cd8a9999ffc0ee7dd7a05d5720d7bfa6cb9d250add19cd0696a56d5c7b5ea6aada64aaba9369992fb7a0b102c544030d685e59e9b19f08b36d98d0534c0e481f32002565fe729776da17ddebea779ffe6f4475fcf790f2f063c5c0e9a5085cc6ac94a1353676199ed61763b6bdd895f77fa99f4a19bf68091fb3f3de0eb771abe9b972517af172b568faf6a8e6934951a75a55a53a156579a8c897dbdf9c9804545a3fce1fc818e0ac7220ca85111ae01155a176c8f08505e179c013d1dedaeda02ac5fde51bd7bfdb98beceedc27438b7e632e32dcbc8ea83292f5569ac5ce585b236dae076c3a0f9b0d98ed8dc0478f7ee683f56db97128af4c3eadad506b8f6a5c40a052b5badc608cef85684969544a60803f36081d8ac35289a15c264d220c87d906f9df1b200081830810c1a627c777b5b742b48601ebcddbca5f5f7df6dbeb934076f0ceece1e179df474ad4a41ab7a80fd69889463bd1ee246f6ee276b63ed959ffc066f2de59c3ce4dbf45e61eacec269457e52f9aca359a1295ba68457544a92cd21ba4bd7d85a9522a9582f2f7c306a290df3f3072c16c03a7756aa2140206821e0664880f021f8811ac1152a0ef1b3797defeecf13b5f3cfbcdb5c90337a77e7717c8167dc69501cf35188501b76a0db13a08eb1b213b2f82bed939bcbff5de86fdd0fe66a8ddfc4b41cc2fa37322cf5c2952e90b55aae215d580c379dc6489ede92d4c9152c82494af0f06cacb5df52c1a393a5208c722e43135210e9840c001d64309eb1d2d4dae922707fafedb978bbfb8f4e857971fbf7de5e9afaf4fbceb229b3b3caaf07ba244cdae62564cc1463bc1b916bab54ddcdfc5ff61dfef0fbbbfdbdbfcf0db1dc69ffef0765ace9b1451eae0d382555d8b4673c76abd647748ba7ba0e4d96c2626084d221268340accf562a1203e261aaa3e292e1ab6f708c8a0cd026b426c14d8536e2ce85bbe3ffb5af3f3abd36f5c9ffdf71bb3bfb8b5f0ced74b0786570e8e690e3f37f82dd903f59bb8b53de2eeb7b4fff84fe6f7df315ffe85f6f2aff8972f7d5efee5e3977fe5bd7c79e0fca55f7162736757e4167ba94a936b5b8bbb70a130359e015d1e1384c76148a1214c1a85cfe524c5c5a425274079c1f6d02990b081035860a344f085886e6bac77cdf2745c00212681288973294a4a02c548c9b1f194b8785a7c223d2189919ccc94a5b2d364ec0c1927338d9b95cecd9471b3d2d859e98cac347a76bab0a420842fa433e911a9c9c2d464515a2a2f42509495462286fa7a7f8c0af08323c8fd65849f65f4a80801e411a6676082b081104470105b7fa2caebc1e83023242892418aa013231944b03f8a162aa484208e087c72b0884a105108b0e872a8e01004a460f70a218241123248022a41400d05f12821c5b9996432d1dfcf3b28c0d52348c178387f84616ce8a8303a038a8be687982164700bc12b2d2cf01a1cb8fb77ff5c2060526284bcd4f8683e830cb77c060946251197250a63c545f0e1559718e4d4b82878c9fd16f804100df9bb41389d549493e9efeffbde81df1e7cffc0871fbc77f8a383be9f1cc6a2fc89c1581a91c0201319941fc5a49260854208fef0fd7757b55aaf478fc6c8417eb037ec21607a448115711853cc65b8d75d0411612c1e83028275646f78264e14e67a2f42e97e2ff251619490b2fc9c43870ffbf8f860b1582a95ca17f0e3e2e2d2d2d2b273728e1cc9cbcb93e7c3550057a1fb2a2a2e2ea9aaaaeaefefb7582c5e0ea733511a238de447f1b9d17c4e543847e2125bc263477299115c86884307095834be8b95124e27f3400c7238c37d0b102c9a90ed7a061e8e0c638979ac684158bc58141ece8b8989696e6e9e9c9c74381cdf7efbed77df7de7fe83dfff7e792d2e2e5ebd7ab5b3b3ebf4e9ce531d1dad6ded2dadad4dcd2d8d4d4d0d8d8df50d0d75f5f5b575f56e5b07d6ad06588757e199e69696e6d6d696b6b6b6f6f6f68e8e0ef894aeaed39d9d3dbdbd03030346a3f18f7ffce3f7df7f0f407f725fe0fcf9cf7f8615b8fefac3f58ac573bd7cf95ffce0de37ad99a9990000000049454e44ae426082'); ",
                "CREATE TABLE IF NOT EXISTS `Customer` (`customerId` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE, `userName` TEXT NOT NULL UNIQUE, `userPwd` TEXT NOT NULL, `firstName` TEXT NOT NULL, `lastName` TEXT NOT NULL, `address` TEXT, `postalCode` TEXT);",
                "INSERT INTO `Customer` VALUES (1,'JamesQiu','a12345','James','Qiu','Markham','L6E2C1'), (2,'HanLin','b12345','LinLin','Han','NewMarket','L6E2C2');",
                "COMMIT;"
            };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);


        //init variables
        initVariable();
        _dbHelper = new DatabaseHelper(this, getFilesDir().getAbsolutePath());

    }

    private void initVariable()
    {
        _isCustomer = true;
        //init database sql
        DatabaseHelper.dbInitialize(tables,tableCreatorString);
    }

    //methods to get log in type
    public void getLoginType(View view) {
        TextView txtCustomer = findViewById(R.id.txtLoginCustomer);
        TextView txtRep = findViewById(R.id.txtLoginRep);
        if (view.getId() ==  R.id.txtLoginCustomer)
        {
            //customer login
            txtCustomer.setAlpha(1);
            txtRep.setAlpha(Float.parseFloat("0.5"));
            _isCustomer = true;
        }
        else
        {
            //rep login
            txtCustomer.setAlpha(Float.parseFloat("0.5"));
            txtRep.setAlpha(1);
            _isCustomer = false;
        }
    }

    //methods provide log in
    public void authorizeLogin(View view) {

        _dbHelper = new DatabaseHelper(this, getFilesDir().getAbsolutePath());

        TextView txvUsrname = findViewById(R.id.edtUsrName);
        String username = txvUsrname.getText().toString();

        TextView txvUsrpwd = findViewById(R.id.edtPwd);
        String userpwd = txvUsrpwd.getText().toString();

        //share pref
        SharedPreferences myP = getSharedPreferences("Type", MODE_PRIVATE);
        SharedPreferences.Editor prefE = myP.edit();
        if(_dbHelper.verifyLogin(username, userpwd, _isCustomer))
        {
            Intent intent = new Intent();
            if (_isCustomer)
            {
                intent.setClass(this, CustomerActivity.class);
                prefE.putString("LoginType", "customer");
            }
            else
            {
                intent.setClass(this, RepActivity.class);
                prefE.putString("LoginType", "Rep");
            }
            prefE.putString("UserName", username);
            prefE.apply();
            startActivity(intent);
        }
        else    //invalid log in
        {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Login failed!").setMessage("Invalid credentials")
	                .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {
	                    public void onClick(DialogInterface dialog, int which) {
	                    }
	                }).show();
        }
        _dbHelper.close();
    }

    public void registration(View view) {

        Intent intent = new Intent();
        //share pref
        SharedPreferences myP = getSharedPreferences("Type", MODE_PRIVATE);
        SharedPreferences.Editor prefE = myP.edit();

        if (_isCustomer)
        {
            prefE.putString("LoginType", "customer");
        }
        else
        {
            prefE.putString("LoginType", "Rep");
        }
        prefE.apply();
        intent.setClass(this, RegistrationActivity.class);
        startActivity(intent);

    }
}
